{
    "name": "JupyterLab: Gemini ACP",
    "build": {
        "dockerfile": "Dockerfile",
        "context": "../.."
    },
    "forwardPorts": [
        8888
    ],
    "portsAttributes": {
        "8888": {
            "label": "Jupyter",
            "requireLocalPort": true
        }
    },
    "remoteEnv": {
      "GEMINI_API_KEY": "${localEnv:GEMINI_API_KEY}",
    },
    "secrets": {
      "GEMINI_API_KEY": {
        "description": "Your Gemini API key for accessing Gemini.",
        "documentationUrl": "https://geminicli.com/docs/get-started/authentication/#gemini-api"
      }
    },

    // NOTE: If you have GOOGLE_API_KEY in your localEnv then that will take precedence.
    // You'll need to `unset GOOGLE_API_KEY` or have them both set the same.

    // export ACP_AGENT_COMMAND="gemini"
    // export ACP_AGENT_ARGS="--experimental-acp --yolo"
    // export GRANT_SUDO=yes 

    // export ACP_LOG_LEVEL=DEBUG
    // export ACP_DEBUG_UPDATES=all

    "containerEnv": {
        "JUPYTER_PORT": "8888",
        "GRANT_SUDO": "yes",
        "ACP_AGENT_COMMAND": "gemini",
        "ACP_AGENT_ARGS": "--experimental-acp"
    }
    // Beware of --yolo.  First thing it will inspect and make changes to code it can access.

    // Codespaces ports are private by default so skip the auth token.
    // Need to disable XSRF check for Jupyter MCP servers if auth token is disabled.
    // If you need auth or don't mind the token, then just `jupyter lab` will do the trick.
    // "postStartCommand": "jupyter lab --NotebookApp.token=''  --ServerApp.disable_check_xsrf=True"
}
